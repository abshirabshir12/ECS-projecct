{"ast":null,"code":"/** *******************************************************************************************************************\r\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\").\r\n  You may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n      http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n ******************************************************************************************************************** *//** @jsxImportSource @emotion/react */import Button from'@cloudscape-design/components/button';import Container from'@cloudscape-design/components/container';import Grid from'@cloudscape-design/components/grid';import Header from'@cloudscape-design/components/header';import Multiselect from'@cloudscape-design/components/multiselect';import SpaceBetween from'@cloudscape-design/components/space-between';import TextFilter from'@cloudscape-design/components/text-filter';import{css}from'@emotion/react';import{useCallback,useMemo,useState}from'react';import{LEVEL_SELECTOR_OPTIONS,DEFAULT_NEW_ENTITY_ID,LEVEL_NOT_SET}from'../../../configs';import{useAssumptionLinksContext,useMitigationLinksContext,useControlLinksContext}from'../../../contexts';import{useGlobalSetupContext}from'../../../contexts/GlobalSetupContext/context';import{useThreatsContext}from'../../../contexts/ThreatsContext/context';import useEditMetadata from'../../../hooks/useEditMetadata';import{addTagToEntity,removeTagFromEntity}from'../../../utils/entityTag';import AssetSelector from'../../generic/AssetSelector';import LinkedEntityFilter,{ALL,WITHOUT_NO_LINKED_ENTITY,WITH_LINKED_ENTITY}from'../../generic/LinkedEntityFilter';import{OPTIONS as STRIDEOptions}from'../../generic/STRIDESelector';import TagSelector from'../../generic/TagSelector';import WorkspaceSelector from'../../workspaces/WorkspaceSelector';import SortByComponent,{DEFAULT_SORT_BY}from'../SortBy';import ThreatStatementCard from'../ThreatStatementCard';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";const LevelOptionsWithNoValue=[...LEVEL_SELECTOR_OPTIONS,{label:'Priority Not Set',value:LEVEL_NOT_SET}];const STRIDE_OPTION_NO_VALUE={label:'STRIDE Not Set',value:LEVEL_NOT_SET};const STRIDEOptionsWithNoValue=[...STRIDEOptions,STRIDE_OPTION_NO_VALUE];const LELEV_MAPPING={High:3,Medium:2,Low:1};const styles={btnClearFilter:css({height:'100%',display:'flex',alignItems:'center'})};const ThreatStatementList=_ref=>{let{initialFilter}=_ref;const{statementList,removeStatement,addStatement,editStatement,saveStatement,onThreatEditorView}=useThreatsContext();const{assumptionLinkList,removeAssumptionLinksByLinkedEntityId}=useAssumptionLinksContext();const{mitigationLinkList,removeMitigationLinksByLinkedEntityId}=useMitigationLinksContext();const{controlLinkList,removeControlLinksByLinkedEntityId}=useControlLinksContext();const{showInfoModal,composerMode}=useGlobalSetupContext();const handleRemove=useCallback(async statementId=>{removeStatement(statementId);await removeAssumptionLinksByLinkedEntityId(statementId);await removeMitigationLinksByLinkedEntityId(statementId);await removeControlLinksByLinkedEntityId(statementId);},[removeStatement,removeAssumptionLinksByLinkedEntityId,removeMitigationLinksByLinkedEntityId,removeControlLinksByLinkedEntityId]);const[filteringText,setFilteringText]=useState('');const[sortBy,setSortBy]=useState(DEFAULT_SORT_BY);const[selectedImpactedGoal,setSelectedImpactedGoal]=useState([]);const[selectedImpactedAssets,setSelectedImpactedAssets]=useState([]);const[selectedTags,setSelectedTags]=useState([]);const[selectedPriorities,setSelectedPriorities]=useState(initialFilter&&initialFilter.priority?[initialFilter.priority]:[]);const[selectedSTRIDEs,setSelectedSTRIDEs]=useState(initialFilter&&initialFilter.stride?[initialFilter.stride]:[]);const[selectedLinkedAssumptionFilter,setSelectedLinkedAssumptionFilter]=useState(initialFilter&&typeof initialFilter.linkedAssumptions!=='undefined'?initialFilter.linkedAssumptions?WITH_LINKED_ENTITY:WITHOUT_NO_LINKED_ENTITY:ALL);const[selectedLinkedMitigationFilter,setSelectedLinkedMitigationFilter]=useState(initialFilter&&typeof initialFilter.linkedMitigations!=='undefined'?initialFilter.linkedMitigations?WITH_LINKED_ENTITY:WITHOUT_NO_LINKED_ENTITY:ALL);const[selectedLinkedControlFilter,setSelectedLinkedControlFilter]=useState(initialFilter&&typeof initialFilter.linkedControls!=='undefined'?initialFilter.linkedControls?WITH_LINKED_ENTITY:WITHOUT_NO_LINKED_ENTITY:ALL);const handleEditMetadata=useEditMetadata(saveStatement);const handleAddTagToStatement=useCallback((statement,tag)=>{const updatedStatement=addTagToEntity(statement,tag);saveStatement(updatedStatement);},[saveStatement]);const handleRemoveTagFromStatement=useCallback((statement,tag)=>{const updated=removeTagFromEntity(statement,tag);saveStatement(updated);},[saveStatement]);const filteredStatementList=useMemo(()=>{let output=statementList;if(filteringText){output=output.filter(st=>st.statement&&st.statement.toLowerCase().indexOf(filteringText.toLowerCase())>=0);}if(selectedImpactedAssets&&selectedImpactedAssets.length>0){output=output.filter(st=>{var _tst$impactedAssets;const tst=st;return(_tst$impactedAssets=tst.impactedAssets)===null||_tst$impactedAssets===void 0?void 0:_tst$impactedAssets.some(ia=>selectedImpactedAssets.includes(ia));});}if(selectedImpactedGoal&&selectedImpactedGoal.length>0){output=output.filter(st=>{var _tst$impactedGoal;const tst=st;return(_tst$impactedGoal=tst.impactedGoal)===null||_tst$impactedGoal===void 0?void 0:_tst$impactedGoal.some(ia=>selectedImpactedGoal.includes(ia));});}if(selectedTags&&selectedTags.length>0){output=output.filter(st=>{var _st$tags;return(_st$tags=st.tags)===null||_st$tags===void 0?void 0:_st$tags.some(t=>selectedTags.includes(t));});}if(selectedPriorities&&selectedPriorities.length>0){output=output.filter(st=>{var _st$metadata;const priority=(_st$metadata=st.metadata)===null||_st$metadata===void 0?void 0:_st$metadata.find(m=>m.key==='Priority');const includedNoValue=selectedPriorities.includes(LEVEL_NOT_SET);if(includedNoValue&&(!priority||!priority.value||priority.value.length===0)){return true;}return(priority===null||priority===void 0?void 0:priority.value)&&selectedPriorities.includes(priority.value);});}if(selectedSTRIDEs&&selectedSTRIDEs.length>0){output=output.filter(st=>{var _st$metadata2;const stride=(_st$metadata2=st.metadata)===null||_st$metadata2===void 0?void 0:_st$metadata2.find(m=>m.key==='STRIDE');const includedNoValue=selectedSTRIDEs.includes(LEVEL_NOT_SET);if(includedNoValue&&(!stride||!stride.value||stride.value.length===0)){return true;}return(stride===null||stride===void 0?void 0:stride.value)&&stride.value.some(t=>selectedSTRIDEs.includes(t));});}if(selectedLinkedAssumptionFilter!==ALL){output=output.filter(st=>{return assumptionLinkList.some(al=>al.linkedId===st.id)?selectedLinkedAssumptionFilter===WITH_LINKED_ENTITY:selectedLinkedAssumptionFilter===WITHOUT_NO_LINKED_ENTITY;});}if(selectedLinkedMitigationFilter!==ALL){output=output.filter(st=>{return mitigationLinkList.some(al=>al.linkedId===st.id)?selectedLinkedMitigationFilter===WITH_LINKED_ENTITY:selectedLinkedMitigationFilter===WITHOUT_NO_LINKED_ENTITY;});}if(selectedLinkedControlFilter!==ALL){output=output.filter(st=>{return controlLinkList.some(al=>al.linkedId===st.id)?selectedLinkedControlFilter===WITH_LINKED_ENTITY:selectedLinkedControlFilter===WITHOUT_NO_LINKED_ENTITY;});}if(sortBy.field==='Priority'){output=output.sort((op1,op2)=>{var _op1$metadata,_op1$metadata$find,_op2$metadata,_op2$metadata$find;const priority1=(_op1$metadata=op1.metadata)===null||_op1$metadata===void 0?void 0:(_op1$metadata$find=_op1$metadata.find(m=>m.key==='Priority'))===null||_op1$metadata$find===void 0?void 0:_op1$metadata$find.value;const priority2=(_op2$metadata=op2.metadata)===null||_op2$metadata===void 0?void 0:(_op2$metadata$find=_op2$metadata.find(m=>m.key==='Priority'))===null||_op2$metadata$find===void 0?void 0:_op2$metadata$find.value;const priorityValue1=priority1&&LELEV_MAPPING[priority1]||0;const priorityValue2=priority2&&LELEV_MAPPING[priority2]||0;return priorityValue2-priorityValue1;});}else{output=output.sort((op1,op2)=>(op2.numericId||Number.MAX_VALUE)-(op1.numericId||Number.MAX_VALUE));}if(sortBy.ascending){output=output.reverse();}return output;},[filteringText,statementList,assumptionLinkList,mitigationLinkList,controlLinkList,selectedImpactedAssets,selectedImpactedGoal,selectedTags,selectedPriorities,selectedSTRIDEs,selectedLinkedAssumptionFilter,selectedLinkedMitigationFilter,selectedLinkedControlFilter,sortBy]);const hasNoFilter=useMemo(()=>{return filteringText===''&&selectedImpactedAssets.length===0&&selectedImpactedGoal.length===0&&selectedTags.length===0&&selectedPriorities.length===0&&selectedSTRIDEs.length===0&&selectedLinkedAssumptionFilter===ALL&&selectedLinkedControlFilter===ALL&&selectedLinkedMitigationFilter===ALL;},[filteringText,selectedImpactedAssets,selectedImpactedGoal,selectedTags,selectedPriorities,selectedSTRIDEs,selectedLinkedAssumptionFilter,selectedLinkedMitigationFilter,selectedLinkedControlFilter]);const handleAddStatement=useCallback(idToCopy=>{addStatement(idToCopy);onThreatEditorView===null||onThreatEditorView===void 0?void 0:onThreatEditorView(DEFAULT_NEW_ENTITY_ID);},[addStatement,onThreatEditorView]);const handleEditStatement=useCallback(id=>{editStatement(id);onThreatEditorView===null||onThreatEditorView===void 0?void 0:onThreatEditorView(id);},[editStatement,onThreatEditorView]);const actions=useMemo(()=>{return _jsx(_Fragment,{children:composerMode!=='Full'?_jsx(WorkspaceSelector,{embededMode:true,enabledExportAll:statementList.length>0,enabledRemoveAll:statementList.length>0,enabledExportFiltered:!hasNoFilter,filteredThreats:filteredStatementList,children:_jsx(Button,{variant:\"primary\",onClick:()=>handleAddStatement(),children:\"Add new statement\"})}):_jsx(SpaceBetween,{direction:\"horizontal\",size:\"s\",children:_jsx(Button,{variant:\"primary\",onClick:()=>handleAddStatement(),children:\"Add new statement\"})})});},[filteredStatementList,handleAddStatement,statementList,hasNoFilter,composerMode]);const allImpactedGoal=useMemo(()=>{return statementList.reduce((all,cur)=>{var _statement$impactedGo;const statement=cur;return[...all,...(((_statement$impactedGo=statement.impactedGoal)===null||_statement$impactedGo===void 0?void 0:_statement$impactedGo.filter(ig=>!all.includes(ig)))||[])];},[]);},[statementList]);const allImpactedAssets=useMemo(()=>{return statementList.reduce((all,cur)=>{var _statement$impactedAs;const statement=cur;return[...all,...(((_statement$impactedAs=statement.impactedAssets)===null||_statement$impactedAs===void 0?void 0:_statement$impactedAs.filter(ia=>!all.includes(ia)))||[])];},[]);},[statementList]);const allTags=useMemo(()=>{return statementList.reduce((all,cur)=>{var _cur$tags;return[...all,...(((_cur$tags=cur.tags)===null||_cur$tags===void 0?void 0:_cur$tags.filter(ia=>!all.includes(ia)))||[])];},[]);},[statementList]);const handleClearFilter=useCallback(()=>{setFilteringText('');setSelectedImpactedAssets([]);setSelectedImpactedGoal([]);setSelectedTags([]);setSelectedPriorities([]);setSelectedSTRIDEs([]);setSelectedLinkedAssumptionFilter(ALL);setSelectedLinkedControlFilter(ALL);setSelectedLinkedMitigationFilter(ALL);},[]);const gridDefinition=useMemo(()=>{return composerMode==='Full'?[{colspan:{default:12,xs:6,s:2}},{colspan:{default:12,xs:6,s:2}},{colspan:{default:12,xs:6,s:2}},{colspan:{default:12,xs:6,s:2}},{colspan:{default:12,xs:6,s:2}},{colspan:{default:12,xs:6,s:3}},{colspan:{default:12,xs:6,s:3}},{colspan:{default:12,xs:6,s:3}},{colspan:{default:12,xs:6,s:2}}]:[{colspan:{default:12,xs:6,s:2}},{colspan:{default:12,xs:6,s:2}},{colspan:{default:12,xs:6,s:2.5}},{colspan:{default:12,xs:6,s:2.5}},{colspan:{default:12,xs:5,s:2}},{colspan:{default:1}}];},[composerMode]);return _jsx(\"div\",{children:_jsxs(SpaceBetween,{direction:\"vertical\",size:\"s\",children:[_jsx(Container,{header:_jsx(Header,{actions:actions,counter:`(${filteredStatementList.length})`,info:composerMode==='Full'?undefined:_jsx(Button,{variant:\"icon\",iconName:\"status-info\",onClick:showInfoModal}),children:\"Threat Statement List\"}),children:_jsxs(SpaceBetween,{direction:\"vertical\",size:\"s\",children:[_jsx(TextFilter,{filteringText:filteringText,filteringPlaceholder:\"Find threat statements\",filteringAriaLabel:\"Filter threat statements\",onChange:_ref2=>{let{detail}=_ref2;return setFilteringText(detail.filteringText);}}),_jsxs(Grid,{gridDefinition:gridDefinition,children:[_jsx(Multiselect,{tokenLimit:2,selectedOptions:selectedPriorities.map(ia=>({label:ia,value:ia})),onChange:_ref3=>{var _detail$selectedOptio;let{detail}=_ref3;return setSelectedPriorities(((_detail$selectedOptio=detail.selectedOptions)===null||_detail$selectedOptio===void 0?void 0:_detail$selectedOptio.map(o=>o.value||''))||[]);},deselectAriaLabel:e=>`Remove ${e.label}`,options:LevelOptionsWithNoValue,placeholder:\"Filtered by priority\",selectedAriaLabel:\"Selected\"}),_jsx(Multiselect,{tokenLimit:0,selectedOptions:[...STRIDEOptions.filter(x=>selectedSTRIDEs.includes(x.value)),...(selectedSTRIDEs.includes(LEVEL_NOT_SET)?[STRIDE_OPTION_NO_VALUE]:[])],onChange:_ref4=>{var _detail$selectedOptio2;let{detail}=_ref4;return setSelectedSTRIDEs(((_detail$selectedOptio2=detail.selectedOptions)===null||_detail$selectedOptio2===void 0?void 0:_detail$selectedOptio2.map(o=>o.value||''))||[]);},deselectAriaLabel:e=>`Remove ${e.label}`,options:STRIDEOptionsWithNoValue,placeholder:\"Filtered by STRIDE\",selectedAriaLabel:\"Selected\"}),_jsx(AssetSelector,{allAssets:allImpactedAssets,selectedAssets:selectedImpactedAssets,setSelectedAssets:setSelectedImpactedAssets}),_jsx(Multiselect,{tokenLimit:2,selectedOptions:selectedImpactedGoal.map(ig=>({label:ig,value:ig})),onChange:_ref5=>{var _detail$selectedOptio3;let{detail}=_ref5;return setSelectedImpactedGoal(((_detail$selectedOptio3=detail.selectedOptions)===null||_detail$selectedOptio3===void 0?void 0:_detail$selectedOptio3.map(o=>o.value||''))||[]);},deselectAriaLabel:e=>`Remove ${e.label}`,options:allImpactedGoal.map(g=>({label:g,value:g})),placeholder:\"Filtered by impacted goal\",selectedAriaLabel:\"Selected\"}),_jsx(TagSelector,{allTags:allTags,selectedTags:selectedTags,setSelectedTags:setSelectedTags}),composerMode==='Full'&&_jsx(LinkedEntityFilter,{label:\"Linked controls\",entityDisplayName:\"controls\",callerName:\"threats\",selected:selectedLinkedControlFilter,setSelected:setSelectedLinkedControlFilter}),composerMode==='Full'&&_jsx(LinkedEntityFilter,{label:\"Linked mitigations\",entityDisplayName:\"mitigations\",callerName:\"threats\",selected:selectedLinkedMitigationFilter,setSelected:setSelectedLinkedMitigationFilter}),composerMode==='Full'&&_jsx(LinkedEntityFilter,{label:\"Linked assumptions\",entityDisplayName:\"assumptions\",callerName:\"threats\",selected:selectedLinkedAssumptionFilter,setSelected:setSelectedLinkedAssumptionFilter}),composerMode==='Full'?_jsx(\"div\",{css:styles.btnClearFilter,children:_jsx(\"div\",{children:_jsx(Button,{onClick:handleClearFilter,disabled:hasNoFilter,children:\"Clear filters\"})})}):_jsx(Button,{onClick:handleClearFilter,variant:\"icon\",iconSvg:_jsx(\"svg\",{focusable:\"false\",\"aria-hidden\":\"true\",viewBox:\"0 0 24 24\",tabIndex:-1,children:_jsx(\"path\",{d:\"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z\"})}),ariaLabel:\"Clear filters\",disabled:hasNoFilter})]}),_jsx(Grid,{gridDefinition:[{colspan:{default:12,xs:6}}],children:_jsx(SortByComponent,{value:sortBy,setValue:setSortBy})})]})}),filteredStatementList===null||filteredStatementList===void 0?void 0:filteredStatementList.map(st=>_jsx(ThreatStatementCard,{statement:st,onCopy:handleAddStatement,onRemove:handleRemove,onEditInWizard:handleEditStatement,onEditMetadata:handleEditMetadata,onAddTagToStatement:handleAddTagToStatement,onRemoveTagFromStatement:handleRemoveTagFromStatement,showLinkedEntities:composerMode==='Full'},st.id))]})});};export default ThreatStatementList;","map":{"version":3,"names":["Button","Container","Grid","Header","Multiselect","SpaceBetween","TextFilter","css","useCallback","useMemo","useState","LEVEL_SELECTOR_OPTIONS","DEFAULT_NEW_ENTITY_ID","LEVEL_NOT_SET","useAssumptionLinksContext","useMitigationLinksContext","useControlLinksContext","useGlobalSetupContext","useThreatsContext","useEditMetadata","addTagToEntity","removeTagFromEntity","AssetSelector","LinkedEntityFilter","ALL","WITHOUT_NO_LINKED_ENTITY","WITH_LINKED_ENTITY","OPTIONS","STRIDEOptions","TagSelector","WorkspaceSelector","SortByComponent","DEFAULT_SORT_BY","ThreatStatementCard","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LevelOptionsWithNoValue","label","value","STRIDE_OPTION_NO_VALUE","STRIDEOptionsWithNoValue","LELEV_MAPPING","High","Medium","Low","styles","btnClearFilter","height","display","alignItems","ThreatStatementList","_ref","initialFilter","statementList","removeStatement","addStatement","editStatement","saveStatement","onThreatEditorView","assumptionLinkList","removeAssumptionLinksByLinkedEntityId","mitigationLinkList","removeMitigationLinksByLinkedEntityId","controlLinkList","removeControlLinksByLinkedEntityId","showInfoModal","composerMode","handleRemove","statementId","filteringText","setFilteringText","sortBy","setSortBy","selectedImpactedGoal","setSelectedImpactedGoal","selectedImpactedAssets","setSelectedImpactedAssets","selectedTags","setSelectedTags","selectedPriorities","setSelectedPriorities","priority","selectedSTRIDEs","setSelectedSTRIDEs","stride","selectedLinkedAssumptionFilter","setSelectedLinkedAssumptionFilter","linkedAssumptions","selectedLinkedMitigationFilter","setSelectedLinkedMitigationFilter","linkedMitigations","selectedLinkedControlFilter","setSelectedLinkedControlFilter","linkedControls","handleEditMetadata","handleAddTagToStatement","statement","tag","updatedStatement","handleRemoveTagFromStatement","updated","filteredStatementList","output","filter","st","toLowerCase","indexOf","length","_tst$impactedAssets","tst","impactedAssets","some","ia","includes","_tst$impactedGoal","impactedGoal","_st$tags","tags","t","_st$metadata","metadata","find","m","key","includedNoValue","_st$metadata2","al","linkedId","id","field","sort","op1","op2","_op1$metadata","_op1$metadata$find","_op2$metadata","_op2$metadata$find","priority1","priority2","priorityValue1","priorityValue2","numericId","Number","MAX_VALUE","ascending","reverse","hasNoFilter","handleAddStatement","idToCopy","handleEditStatement","actions","children","embededMode","enabledExportAll","enabledRemoveAll","enabledExportFiltered","filteredThreats","variant","onClick","direction","size","allImpactedGoal","reduce","all","cur","_statement$impactedGo","ig","allImpactedAssets","_statement$impactedAs","allTags","_cur$tags","handleClearFilter","gridDefinition","colspan","default","xs","s","header","counter","info","undefined","iconName","filteringPlaceholder","filteringAriaLabel","onChange","_ref2","detail","tokenLimit","selectedOptions","map","_ref3","_detail$selectedOptio","o","deselectAriaLabel","e","options","placeholder","selectedAriaLabel","x","_ref4","_detail$selectedOptio2","allAssets","selectedAssets","setSelectedAssets","_ref5","_detail$selectedOptio3","g","entityDisplayName","callerName","selected","setSelected","disabled","iconSvg","focusable","viewBox","tabIndex","d","ariaLabel","setValue","onCopy","onRemove","onEditInWizard","onEditMetadata","onAddTagToStatement","onRemoveTagFromStatement","showLinkedEntities"],"sources":["C:/Users/abshi/OneDrive/Documents/yyyy/ECS-projecct/app/src/components/threats/ThreatStatementList/index.tsx"],"sourcesContent":["/** *******************************************************************************************************************\r\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\").\r\n  You may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n      http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n ******************************************************************************************************************** */\r\n\r\n/** @jsxImportSource @emotion/react */\r\nimport Button from '@cloudscape-design/components/button';\r\nimport Container from '@cloudscape-design/components/container';\r\nimport Grid from '@cloudscape-design/components/grid';\r\nimport Header from '@cloudscape-design/components/header';\r\nimport Multiselect from '@cloudscape-design/components/multiselect';\r\nimport SpaceBetween from '@cloudscape-design/components/space-between';\r\nimport TextFilter from '@cloudscape-design/components/text-filter';\r\nimport { css } from '@emotion/react';\r\nimport { FC, useCallback, useMemo, useState } from 'react';\r\nimport { LEVEL_SELECTOR_OPTIONS, DEFAULT_NEW_ENTITY_ID, LEVEL_NOT_SET } from '../../../configs';\r\nimport { useAssumptionLinksContext, useMitigationLinksContext, useControlLinksContext } from '../../../contexts';\r\nimport { useGlobalSetupContext } from '../../../contexts/GlobalSetupContext/context';\r\nimport { useThreatsContext } from '../../../contexts/ThreatsContext/context';\r\nimport { TemplateThreatStatement, ThreatStatementListFilter } from '../../../customTypes';\r\nimport useEditMetadata from '../../../hooks/useEditMetadata';\r\nimport { addTagToEntity, removeTagFromEntity } from '../../../utils/entityTag';\r\nimport AssetSelector from '../../generic/AssetSelector';\r\nimport LinkedEntityFilter, { ALL, WITHOUT_NO_LINKED_ENTITY, WITH_LINKED_ENTITY } from '../../generic/LinkedEntityFilter';\r\nimport { OPTIONS as STRIDEOptions } from '../../generic/STRIDESelector';\r\nimport TagSelector from '../../generic/TagSelector';\r\nimport WorkspaceSelector from '../../workspaces/WorkspaceSelector';\r\nimport SortByComponent, { SortByOption, DEFAULT_SORT_BY } from '../SortBy';\r\nimport ThreatStatementCard from '../ThreatStatementCard';\r\n\r\nconst LevelOptionsWithNoValue = [...LEVEL_SELECTOR_OPTIONS, {\r\n  label: 'Priority Not Set', value: LEVEL_NOT_SET,\r\n}];\r\n\r\nconst STRIDE_OPTION_NO_VALUE = {\r\n  label: 'STRIDE Not Set', value: LEVEL_NOT_SET,\r\n};\r\n\r\nconst STRIDEOptionsWithNoValue = [...STRIDEOptions, STRIDE_OPTION_NO_VALUE];\r\n\r\nconst LELEV_MAPPING: any = {\r\n  High: 3,\r\n  Medium: 2,\r\n  Low: 1,\r\n};\r\n\r\nconst styles = {\r\n  btnClearFilter: css({\r\n    height: '100%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  }),\r\n};\r\n\r\nexport interface ThreatStatementListProps {\r\n  initialFilter?: ThreatStatementListFilter;\r\n}\r\n\r\nconst ThreatStatementList: FC<ThreatStatementListProps> = ({\r\n  initialFilter,\r\n}) => {\r\n  const {\r\n    statementList,\r\n    removeStatement,\r\n    addStatement,\r\n    editStatement,\r\n    saveStatement,\r\n    onThreatEditorView,\r\n  } = useThreatsContext();\r\n\r\n  const {\r\n    assumptionLinkList,\r\n    removeAssumptionLinksByLinkedEntityId,\r\n  } = useAssumptionLinksContext();\r\n\r\n  const {\r\n    mitigationLinkList,\r\n    removeMitigationLinksByLinkedEntityId,\r\n  } = useMitigationLinksContext();\r\n\r\n  const {\r\n    controlLinkList,\r\n    removeControlLinksByLinkedEntityId,\r\n  } = useControlLinksContext();\r\n\r\n  const {\r\n    showInfoModal,\r\n    composerMode,\r\n  } = useGlobalSetupContext();\r\n\r\n  const handleRemove = useCallback(async (statementId: string) => {\r\n    removeStatement(statementId);\r\n    await removeAssumptionLinksByLinkedEntityId(statementId);\r\n    await removeMitigationLinksByLinkedEntityId(statementId);\r\n    await removeControlLinksByLinkedEntityId(statementId);\r\n  }, [removeStatement, removeAssumptionLinksByLinkedEntityId, removeMitigationLinksByLinkedEntityId, removeControlLinksByLinkedEntityId]);\r\n\r\n  const [filteringText, setFilteringText] = useState('');\r\n  const [sortBy, setSortBy] = useState<SortByOption>(DEFAULT_SORT_BY);\r\n\r\n  const [\r\n    selectedImpactedGoal,\r\n    setSelectedImpactedGoal,\r\n  ] = useState<string[]>([]);\r\n\r\n  const [\r\n    selectedImpactedAssets,\r\n    setSelectedImpactedAssets,\r\n  ] = useState<string[]>([]);\r\n\r\n  const [\r\n    selectedTags,\r\n    setSelectedTags,\r\n  ] = useState<string[]>([]);\r\n\r\n  const [\r\n    selectedPriorities,\r\n    setSelectedPriorities,\r\n  ] = useState<string[]>(initialFilter && initialFilter.priority ? [initialFilter.priority] : []);\r\n\r\n  const [\r\n    selectedSTRIDEs,\r\n    setSelectedSTRIDEs,\r\n  ] = useState<string[]>(initialFilter && initialFilter.stride ? [initialFilter.stride] : []);\r\n\r\n  const [\r\n    selectedLinkedAssumptionFilter,\r\n    setSelectedLinkedAssumptionFilter,\r\n  ] = useState(initialFilter && typeof initialFilter.linkedAssumptions !== 'undefined' ? (\r\n    initialFilter.linkedAssumptions ? WITH_LINKED_ENTITY :\r\n      WITHOUT_NO_LINKED_ENTITY\r\n  ) : ALL);\r\n\r\n  const [\r\n    selectedLinkedMitigationFilter,\r\n    setSelectedLinkedMitigationFilter,\r\n  ] = useState(initialFilter && typeof initialFilter.linkedMitigations !== 'undefined' ? (\r\n    initialFilter.linkedMitigations ? WITH_LINKED_ENTITY :\r\n      WITHOUT_NO_LINKED_ENTITY\r\n  ) : ALL);\r\n\r\n  const [\r\n    selectedLinkedControlFilter,\r\n    setSelectedLinkedControlFilter,\r\n  ] = useState(initialFilter && typeof initialFilter.linkedControls !== 'undefined' ? (\r\n    initialFilter.linkedControls ? WITH_LINKED_ENTITY :\r\n      WITHOUT_NO_LINKED_ENTITY\r\n  ) : ALL);\r\n\r\n  const handleEditMetadata = useEditMetadata(saveStatement);\r\n\r\n  const handleAddTagToStatement = useCallback((statement: TemplateThreatStatement, tag: string) => {\r\n    const updatedStatement = addTagToEntity(statement, tag);\r\n    saveStatement(updatedStatement);\r\n  }, [saveStatement]);\r\n\r\n  const handleRemoveTagFromStatement = useCallback((statement: TemplateThreatStatement, tag: string) => {\r\n    const updated = removeTagFromEntity(statement, tag);\r\n    saveStatement(updated);\r\n  }, [saveStatement]);\r\n\r\n  const filteredStatementList = useMemo(() => {\r\n    let output = statementList;\r\n\r\n    if (filteringText) {\r\n      output = output.filter(st => st.statement && st.statement.toLowerCase().indexOf(filteringText.toLowerCase()) >= 0);\r\n    }\r\n\r\n    if (selectedImpactedAssets && selectedImpactedAssets.length > 0) {\r\n      output = output.filter(st => {\r\n        const tst = st as TemplateThreatStatement;\r\n        return tst.impactedAssets?.some(ia => selectedImpactedAssets.includes(ia));\r\n      });\r\n    }\r\n\r\n    if (selectedImpactedGoal && selectedImpactedGoal.length > 0) {\r\n      output = output.filter(st => {\r\n        const tst = st as TemplateThreatStatement;\r\n        return tst.impactedGoal?.some(ia => selectedImpactedGoal.includes(ia));\r\n      });\r\n    }\r\n\r\n    if (selectedTags && selectedTags.length > 0) {\r\n      output = output.filter(st => {\r\n        return st.tags?.some(t => selectedTags.includes(t));\r\n      });\r\n    }\r\n\r\n    if (selectedPriorities && selectedPriorities.length > 0) {\r\n      output = output.filter(st => {\r\n        const priority = st.metadata?.find(m => m.key === 'Priority');\r\n        const includedNoValue = selectedPriorities.includes(LEVEL_NOT_SET);\r\n        if (includedNoValue && (!priority || !priority.value || priority.value.length === 0)) {\r\n          return true;\r\n        }\r\n\r\n        return priority?.value && selectedPriorities.includes(priority.value as string);\r\n      });\r\n    }\r\n\r\n    if (selectedSTRIDEs && selectedSTRIDEs.length > 0) {\r\n      output = output.filter(st => {\r\n        const stride = st.metadata?.find(m => m.key === 'STRIDE');\r\n        const includedNoValue = selectedSTRIDEs.includes(LEVEL_NOT_SET);\r\n        if (includedNoValue && (!stride || !stride.value || stride.value.length === 0)) {\r\n          return true;\r\n        }\r\n\r\n        return stride?.value && (stride.value as string[]).some(t => selectedSTRIDEs.includes(t));\r\n      });\r\n    }\r\n\r\n    if (selectedLinkedAssumptionFilter !== ALL) {\r\n      output = output.filter(st => {\r\n        return assumptionLinkList.some(al => al.linkedId === st.id) ?\r\n          selectedLinkedAssumptionFilter === WITH_LINKED_ENTITY :\r\n          selectedLinkedAssumptionFilter === WITHOUT_NO_LINKED_ENTITY;\r\n      });\r\n    }\r\n\r\n    if (selectedLinkedMitigationFilter !== ALL) {\r\n      output = output.filter(st => {\r\n        return mitigationLinkList.some(al => al.linkedId === st.id) ?\r\n          selectedLinkedMitigationFilter === WITH_LINKED_ENTITY :\r\n          selectedLinkedMitigationFilter === WITHOUT_NO_LINKED_ENTITY;\r\n      });\r\n    }\r\n\r\n    if (selectedLinkedControlFilter !== ALL) {\r\n      output = output.filter(st => {\r\n        return controlLinkList.some(al => al.linkedId === st.id) ?\r\n          selectedLinkedControlFilter === WITH_LINKED_ENTITY :\r\n          selectedLinkedControlFilter === WITHOUT_NO_LINKED_ENTITY;\r\n      });\r\n    }\r\n\r\n    if (sortBy.field === 'Priority') {\r\n      output = output.sort((op1, op2) => {\r\n        const priority1 = op1.metadata?.find(m => m.key === 'Priority')?.value as string;\r\n        const priority2 = op2.metadata?.find(m => m.key === 'Priority')?.value as string;\r\n        const priorityValue1 = (priority1 && LELEV_MAPPING[priority1]) || 0;\r\n        const priorityValue2 = (priority2 && LELEV_MAPPING[priority2]) || 0;\r\n        return priorityValue2 - priorityValue1;\r\n      });\r\n    } else {\r\n      output = output.sort((op1, op2) => (op2.numericId || Number.MAX_VALUE) - (op1.numericId || Number.MAX_VALUE));\r\n    }\r\n\r\n    if (sortBy.ascending) {\r\n      output = output.reverse();\r\n    }\r\n\r\n    return output;\r\n  }, [filteringText, statementList,\r\n    assumptionLinkList, mitigationLinkList, controlLinkList,\r\n    selectedImpactedAssets, selectedImpactedGoal,\r\n    selectedTags, selectedPriorities, selectedSTRIDEs,\r\n    selectedLinkedAssumptionFilter, selectedLinkedMitigationFilter, selectedLinkedControlFilter,\r\n    sortBy]);\r\n\r\n  const hasNoFilter = useMemo(() => {\r\n    return (filteringText === ''\r\n      && selectedImpactedAssets.length === 0\r\n      && selectedImpactedGoal.length === 0\r\n      && selectedTags.length === 0\r\n      && selectedPriorities.length === 0\r\n      && selectedSTRIDEs.length === 0\r\n      && selectedLinkedAssumptionFilter === ALL\r\n      && selectedLinkedControlFilter === ALL\r\n      && selectedLinkedMitigationFilter === ALL);\r\n  }, [filteringText, selectedImpactedAssets, selectedImpactedGoal,\r\n    selectedTags, selectedPriorities, selectedSTRIDEs,\r\n    selectedLinkedAssumptionFilter, selectedLinkedMitigationFilter, selectedLinkedControlFilter]);\r\n\r\n  const handleAddStatement = useCallback((idToCopy?: string) => {\r\n    addStatement(idToCopy);\r\n    onThreatEditorView?.(DEFAULT_NEW_ENTITY_ID);\r\n  }, [addStatement, onThreatEditorView]);\r\n\r\n  const handleEditStatement = useCallback((id: string) => {\r\n    editStatement(id);\r\n    onThreatEditorView?.(id);\r\n  }, [editStatement, onThreatEditorView]);\r\n\r\n  const actions = useMemo(() => {\r\n    return (\r\n      <>{composerMode !== 'Full' ?\r\n        (<WorkspaceSelector\r\n          embededMode={true}\r\n          enabledExportAll={statementList.length > 0}\r\n          enabledRemoveAll={statementList.length > 0}\r\n          enabledExportFiltered={!hasNoFilter}\r\n          filteredThreats={filteredStatementList}\r\n        >\r\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>\r\n            Add new statement\r\n          </Button>\r\n        </WorkspaceSelector>) :\r\n        (<SpaceBetween direction='horizontal' size='s'>\r\n          <Button variant=\"primary\" onClick={() => handleAddStatement()}>\r\n            Add new statement\r\n          </Button>\r\n        </SpaceBetween>)}\r\n      </>);\r\n  }, [\r\n    filteredStatementList,\r\n    handleAddStatement,\r\n    statementList,\r\n    hasNoFilter,\r\n    composerMode,\r\n  ]);\r\n\r\n  const allImpactedGoal = useMemo(() => {\r\n    return statementList\r\n      .reduce((all: string[], cur) => {\r\n        const statement = cur as TemplateThreatStatement;\r\n        return [...all, ...statement.impactedGoal?.filter(ig => !all.includes(ig)) || []];\r\n      }, []);\r\n  }, [statementList]);\r\n\r\n  const allImpactedAssets = useMemo(() => {\r\n    return statementList\r\n      .reduce((all: string[], cur) => {\r\n        const statement = cur as TemplateThreatStatement;\r\n        return [...all, ...statement.impactedAssets?.filter(ia => !all.includes(ia)) || []];\r\n      }, []);\r\n  }, [statementList]);\r\n\r\n  const allTags = useMemo(() => {\r\n    return statementList\r\n      .reduce((all: string[], cur) => {\r\n        return [...all, ...cur.tags?.filter(ia => !all.includes(ia)) || []];\r\n      }, []);\r\n  }, [statementList]);\r\n\r\n  const handleClearFilter = useCallback(() => {\r\n    setFilteringText('');\r\n    setSelectedImpactedAssets([]);\r\n    setSelectedImpactedGoal([]);\r\n    setSelectedTags([]);\r\n    setSelectedPriorities([]);\r\n    setSelectedSTRIDEs([]);\r\n    setSelectedLinkedAssumptionFilter(ALL);\r\n    setSelectedLinkedControlFilter(ALL);\r\n    setSelectedLinkedMitigationFilter(ALL);\r\n  }, []);\r\n\r\n  const gridDefinition = useMemo(() => {\r\n    return composerMode === 'Full' ? [\r\n      { colspan: { default: 12, xs: 6, s: 2 } },\r\n      { colspan: { default: 12, xs: 6, s: 2 } },\r\n      { colspan: { default: 12, xs: 6, s: 2 } },\r\n      { colspan: { default: 12, xs: 6, s: 2 } },\r\n      { colspan: { default: 12, xs: 6, s: 2 } },\r\n      { colspan: { default: 12, xs: 6, s: 3 } },\r\n      { colspan: { default: 12, xs: 6, s: 3 } },\r\n      { colspan: { default: 12, xs: 6, s: 3 } },\r\n      { colspan: { default: 12, xs: 6, s: 2 } },\r\n    ] :\r\n      [\r\n        { colspan: { default: 12, xs: 6, s: 2 } },\r\n        { colspan: { default: 12, xs: 6, s: 2 } },\r\n        { colspan: { default: 12, xs: 6, s: 2.5 } },\r\n        { colspan: { default: 12, xs: 6, s: 2.5 } },\r\n        { colspan: { default: 12, xs: 5, s: 2 } },\r\n        { colspan: { default: 1 } },\r\n      ];\r\n  }, [composerMode]);\r\n\r\n  return (<div>\r\n    <SpaceBetween direction='vertical' size='s'>\r\n      <Container header={\r\n        <Header\r\n          actions={actions}\r\n          counter={`(${filteredStatementList.length})`}\r\n          info={composerMode === 'Full' ? undefined : <Button variant='icon' iconName='status-info' onClick={showInfoModal} />}\r\n        >Threat Statement List</Header>\r\n      }>\r\n        <SpaceBetween direction='vertical' size='s'>\r\n          <TextFilter\r\n            filteringText={filteringText}\r\n            filteringPlaceholder=\"Find threat statements\"\r\n            filteringAriaLabel=\"Filter threat statements\"\r\n            onChange={({ detail }) =>\r\n              setFilteringText(detail.filteringText)\r\n            }\r\n          />\r\n          <Grid\r\n            gridDefinition={gridDefinition}\r\n          >\r\n            <Multiselect\r\n              tokenLimit={2}\r\n              selectedOptions={selectedPriorities.map(ia => ({\r\n                label: ia,\r\n                value: ia,\r\n              }))}\r\n              onChange={({ detail }) =>\r\n                setSelectedPriorities(detail.selectedOptions?.map(o => o.value || '') || [])\r\n              }\r\n              deselectAriaLabel={e => `Remove ${e.label}`}\r\n              options={LevelOptionsWithNoValue}\r\n              placeholder=\"Filtered by priority\"\r\n              selectedAriaLabel=\"Selected\"\r\n            />\r\n            <Multiselect\r\n              tokenLimit={0}\r\n              selectedOptions={[...STRIDEOptions.filter(x => selectedSTRIDEs.includes(x.value)),\r\n                ...selectedSTRIDEs.includes(LEVEL_NOT_SET) ? [STRIDE_OPTION_NO_VALUE] : []]}\r\n              onChange={({ detail }) =>\r\n                setSelectedSTRIDEs(detail.selectedOptions?.map(o => o.value || '') || [])\r\n              }\r\n              deselectAriaLabel={e => `Remove ${e.label}`}\r\n              options={STRIDEOptionsWithNoValue}\r\n              placeholder=\"Filtered by STRIDE\"\r\n              selectedAriaLabel=\"Selected\"\r\n            />\r\n            <AssetSelector\r\n              allAssets={allImpactedAssets}\r\n              selectedAssets={selectedImpactedAssets}\r\n              setSelectedAssets={setSelectedImpactedAssets}\r\n            />\r\n            <Multiselect\r\n              tokenLimit={2}\r\n              selectedOptions={selectedImpactedGoal.map(ig => ({\r\n                label: ig,\r\n                value: ig,\r\n              }))}\r\n              onChange={({ detail }) =>\r\n                setSelectedImpactedGoal(detail.selectedOptions?.map(o => o.value || '') || [])\r\n              }\r\n              deselectAriaLabel={e => `Remove ${e.label}`}\r\n              options={allImpactedGoal.map(g => ({\r\n                label: g,\r\n                value: g,\r\n              }))}\r\n              placeholder=\"Filtered by impacted goal\"\r\n              selectedAriaLabel=\"Selected\"\r\n            />\r\n            <TagSelector\r\n              allTags={allTags}\r\n              selectedTags={selectedTags}\r\n              setSelectedTags={setSelectedTags}\r\n            />\r\n            {composerMode === 'Full' && <LinkedEntityFilter\r\n              label='Linked controls'\r\n              entityDisplayName='controls'\r\n              callerName='threats'\r\n              selected={selectedLinkedControlFilter}\r\n              setSelected={setSelectedLinkedControlFilter}\r\n            />}\r\n            {composerMode === 'Full' && <LinkedEntityFilter\r\n              label='Linked mitigations'\r\n              entityDisplayName='mitigations'\r\n              callerName='threats'\r\n              selected={selectedLinkedMitigationFilter}\r\n              setSelected={setSelectedLinkedMitigationFilter}\r\n            />}\r\n            {composerMode === 'Full' && <LinkedEntityFilter\r\n              label='Linked assumptions'\r\n              entityDisplayName='assumptions'\r\n              callerName='threats'\r\n              selected={selectedLinkedAssumptionFilter}\r\n              setSelected={setSelectedLinkedAssumptionFilter}\r\n            />}\r\n            {composerMode === 'Full' ? (<div css={styles.btnClearFilter}>\r\n              <div><Button onClick={handleClearFilter}\r\n                disabled={hasNoFilter}\r\n              >\r\n                Clear filters\r\n              </Button></div>\r\n            </div>) : <Button onClick={handleClearFilter}\r\n              variant='icon'\r\n              iconSvg={<svg\r\n                focusable=\"false\"\r\n                aria-hidden=\"true\"\r\n                viewBox=\"0 0 24 24\"\r\n                tabIndex={-1}\r\n              >\r\n                <path d=\"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z\"></path>\r\n              </svg>}\r\n              ariaLabel='Clear filters'\r\n              disabled={hasNoFilter}\r\n            />}\r\n          </Grid>\r\n          <Grid\r\n            gridDefinition={[{ colspan: { default: 12, xs: 6 } }]}\r\n          >\r\n            <SortByComponent value={sortBy} setValue={setSortBy} />\r\n          </Grid>\r\n        </SpaceBetween>\r\n      </Container>\r\n      {filteredStatementList?.map(st => (<ThreatStatementCard\r\n        key={st.id}\r\n        statement={st}\r\n        onCopy={handleAddStatement}\r\n        onRemove={handleRemove}\r\n        onEditInWizard={handleEditStatement}\r\n        onEditMetadata={handleEditMetadata}\r\n        onAddTagToStatement={handleAddTagToStatement}\r\n        onRemoveTagFromStatement={handleRemoveTagFromStatement}\r\n        showLinkedEntities={composerMode === 'Full'}\r\n      />))}\r\n    </SpaceBetween>\r\n  </div>);\r\n};\r\n\r\nexport default ThreatStatementList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}