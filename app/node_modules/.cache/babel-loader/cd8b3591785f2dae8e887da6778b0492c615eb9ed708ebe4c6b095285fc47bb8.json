{"ast":null,"code":"/** *******************************************************************************************************************\r\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\").\r\n  You may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n      http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n ******************************************************************************************************************** */import{useCallback}from'react';import{useWorkspacesContext}from'../../contexts';import{useApplicationInfoContext}from'../../contexts/ApplicationContext';import{useArchitectureInfoContext}from'../../contexts/ArchitectureContext';import{useAssumptionLinksContext}from'../../contexts/AssumptionLinksContext';import{useAssumptionsContext}from'../../contexts/AssumptionsContext';import{useDataflowInfoContext}from'../../contexts/DataflowContext';import{useGlobalSetupContext}from'../../contexts/GlobalSetupContext';import{useMitigationLinksContext}from'../../contexts/MitigationLinksContext';import{useMitigationsContext}from'../../contexts/MitigationsContext';import{useThreatsContext}from'../../contexts/ThreatsContext';import{useFlowContext}from'../../contexts/FlowContext';import{useControlsContext}from'../../contexts/ControlsContext';import{useControlLinksContext}from'../../contexts/ControlLinksContext';const useRemoveData=()=>{const{composerMode}=useGlobalSetupContext();const{removeWorkspace,switchWorkspace}=useWorkspacesContext();const{removeApplicationInfo,onDeleteWorkspace:applicationInfoDeleteWorkspace}=useApplicationInfoContext();const{removeArchitectureInfo,onDeleteWorkspace:architectureInfoDeleteWorkspace}=useArchitectureInfoContext();const{removeDataflowInfo,onDeleteWorkspace:dataflowInfoDeleteWorkspace}=useDataflowInfoContext();const{removeAllAssumptions,onDeleteWorkspace:assumptionsDeleteWorkspace}=useAssumptionsContext();const{removeAllMitigations,onDeleteWorkspace:mitigationsDeleteWorkspace}=useMitigationsContext();const{removeAllStatements,onDeleteWorkspace:threatsDeleteWorkspace}=useThreatsContext();const{removeAllAssumptionLinks,onDeleteWorkspace:assumptionLinksDeleteWorkspace}=useAssumptionLinksContext();const{removeAllMitigationLinks,onDeleteWorkspace:mitigationLinksDeleteWorkspace}=useMitigationLinksContext();const{removeFlow,onDeleteWorkspace:flowDeleteWorkspace}=useFlowContext();const{removeAllControls,onDeleteWorkspace:controlsDeleteWorkspace}=useControlsContext();const{removeAllControlLinks,onDeleteWorkspace:controlLinksDeleteWorkspace}=useControlLinksContext();const removeData=useCallback(async()=>{if(composerMode==='Full'){return Promise.all([removeApplicationInfo(),removeArchitectureInfo(),removeDataflowInfo(),removeAllAssumptions(),removeAllMitigations(),removeAllStatements(),removeAllAssumptionLinks(),removeAllMitigationLinks(),removeFlow(),removeAllControls(),removeAllControlLinks()]);}return removeAllStatements();},[composerMode,removeApplicationInfo,removeArchitectureInfo,removeDataflowInfo,removeAllAssumptions,removeAllMitigations,removeAllStatements,removeAllAssumptionLinks,removeAllMitigationLinks,removeFlow,removeAllControls,removeAllControlLinks]);const deleteCurrentWorkspace=useCallback(async toDeleteWorkspaceId=>{if(toDeleteWorkspaceId){await Promise.all([removeWorkspace(toDeleteWorkspaceId),applicationInfoDeleteWorkspace(toDeleteWorkspaceId),architectureInfoDeleteWorkspace(toDeleteWorkspaceId),threatsDeleteWorkspace(toDeleteWorkspaceId),dataflowInfoDeleteWorkspace(toDeleteWorkspaceId),assumptionsDeleteWorkspace(toDeleteWorkspaceId),mitigationsDeleteWorkspace(toDeleteWorkspaceId),assumptionLinksDeleteWorkspace(toDeleteWorkspaceId),mitigationLinksDeleteWorkspace(toDeleteWorkspaceId),flowDeleteWorkspace(toDeleteWorkspaceId),controlsDeleteWorkspace(toDeleteWorkspaceId),controlLinksDeleteWorkspace(toDeleteWorkspaceId)]);switchWorkspace(null);}},[switchWorkspace,applicationInfoDeleteWorkspace,architectureInfoDeleteWorkspace,dataflowInfoDeleteWorkspace,threatsDeleteWorkspace,assumptionsDeleteWorkspace,mitigationsDeleteWorkspace,assumptionLinksDeleteWorkspace,mitigationLinksDeleteWorkspace,flowDeleteWorkspace,controlsDeleteWorkspace,controlLinksDeleteWorkspace,removeWorkspace]);return{removeData,deleteCurrentWorkspace};};export default useRemoveData;","map":{"version":3,"names":["useCallback","useWorkspacesContext","useApplicationInfoContext","useArchitectureInfoContext","useAssumptionLinksContext","useAssumptionsContext","useDataflowInfoContext","useGlobalSetupContext","useMitigationLinksContext","useMitigationsContext","useThreatsContext","useFlowContext","useControlsContext","useControlLinksContext","useRemoveData","composerMode","removeWorkspace","switchWorkspace","removeApplicationInfo","onDeleteWorkspace","applicationInfoDeleteWorkspace","removeArchitectureInfo","architectureInfoDeleteWorkspace","removeDataflowInfo","dataflowInfoDeleteWorkspace","removeAllAssumptions","assumptionsDeleteWorkspace","removeAllMitigations","mitigationsDeleteWorkspace","removeAllStatements","threatsDeleteWorkspace","removeAllAssumptionLinks","assumptionLinksDeleteWorkspace","removeAllMitigationLinks","mitigationLinksDeleteWorkspace","removeFlow","flowDeleteWorkspace","removeAllControls","controlsDeleteWorkspace","removeAllControlLinks","controlLinksDeleteWorkspace","removeData","Promise","all","deleteCurrentWorkspace","toDeleteWorkspaceId"],"sources":["C:/Users/abshi/OneDrive/Documents/yyyy/ECS-projecct/app/src/hooks/useRemoveData/index.ts"],"sourcesContent":["/** *******************************************************************************************************************\r\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\").\r\n  You may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n      http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n ******************************************************************************************************************** */\r\n\r\nimport { useCallback } from 'react';\r\nimport { useWorkspacesContext } from '../../contexts';\r\nimport { useApplicationInfoContext } from '../../contexts/ApplicationContext';\r\nimport { useArchitectureInfoContext } from '../../contexts/ArchitectureContext';\r\nimport { useAssumptionLinksContext } from '../../contexts/AssumptionLinksContext';\r\nimport { useAssumptionsContext } from '../../contexts/AssumptionsContext';\r\nimport { useDataflowInfoContext } from '../../contexts/DataflowContext';\r\nimport { useGlobalSetupContext } from '../../contexts/GlobalSetupContext';\r\nimport { useMitigationLinksContext } from '../../contexts/MitigationLinksContext';\r\nimport { useMitigationsContext } from '../../contexts/MitigationsContext';\r\nimport { useThreatsContext } from '../../contexts/ThreatsContext';\r\nimport { useFlowContext } from '../../contexts/FlowContext';\r\nimport { useControlsContext } from '../../contexts/ControlsContext';\r\nimport { useControlLinksContext } from '../../contexts/ControlLinksContext';\r\n\r\nconst useRemoveData = () => {\r\n  const { composerMode } = useGlobalSetupContext();\r\n  const { removeWorkspace, switchWorkspace } = useWorkspacesContext();\r\n  const { removeApplicationInfo, onDeleteWorkspace: applicationInfoDeleteWorkspace } = useApplicationInfoContext();\r\n  const { removeArchitectureInfo, onDeleteWorkspace: architectureInfoDeleteWorkspace } = useArchitectureInfoContext();\r\n  const { removeDataflowInfo, onDeleteWorkspace: dataflowInfoDeleteWorkspace } = useDataflowInfoContext();\r\n  const { removeAllAssumptions, onDeleteWorkspace: assumptionsDeleteWorkspace } = useAssumptionsContext();\r\n  const { removeAllMitigations, onDeleteWorkspace: mitigationsDeleteWorkspace } = useMitigationsContext();\r\n  const { removeAllStatements, onDeleteWorkspace: threatsDeleteWorkspace } = useThreatsContext();\r\n  const { removeAllAssumptionLinks, onDeleteWorkspace: assumptionLinksDeleteWorkspace } = useAssumptionLinksContext();\r\n  const { removeAllMitigationLinks, onDeleteWorkspace: mitigationLinksDeleteWorkspace } = useMitigationLinksContext();\r\n  const { removeFlow, onDeleteWorkspace: flowDeleteWorkspace } = useFlowContext();\r\n  const { removeAllControls, onDeleteWorkspace: controlsDeleteWorkspace } = useControlsContext();\r\n  const { removeAllControlLinks, onDeleteWorkspace: controlLinksDeleteWorkspace } = useControlLinksContext();\r\n\r\n  const removeData = useCallback(async () => {\r\n    if (composerMode === 'Full') {\r\n      return Promise.all([\r\n        removeApplicationInfo(),\r\n        removeArchitectureInfo(),\r\n        removeDataflowInfo(),\r\n        removeAllAssumptions(),\r\n        removeAllMitigations(),\r\n        removeAllStatements(),\r\n        removeAllAssumptionLinks(),\r\n        removeAllMitigationLinks(),\r\n        removeFlow(),\r\n        removeAllControls(),\r\n        removeAllControlLinks(),\r\n      ]);\r\n    }\r\n\r\n    return removeAllStatements();\r\n  }, [composerMode,\r\n    removeApplicationInfo, removeArchitectureInfo, removeDataflowInfo,\r\n    removeAllAssumptions, removeAllMitigations,\r\n    removeAllStatements, removeAllAssumptionLinks,\r\n    removeAllMitigationLinks, removeFlow, removeAllControls, removeAllControlLinks]);\r\n\r\n  const deleteCurrentWorkspace = useCallback(async (toDeleteWorkspaceId: string) => {\r\n    if (toDeleteWorkspaceId) {\r\n      await Promise.all([\r\n        removeWorkspace(toDeleteWorkspaceId),\r\n        applicationInfoDeleteWorkspace(toDeleteWorkspaceId),\r\n        architectureInfoDeleteWorkspace(toDeleteWorkspaceId),\r\n        threatsDeleteWorkspace(toDeleteWorkspaceId),\r\n        dataflowInfoDeleteWorkspace(toDeleteWorkspaceId),\r\n        assumptionsDeleteWorkspace(toDeleteWorkspaceId),\r\n        mitigationsDeleteWorkspace(toDeleteWorkspaceId),\r\n        assumptionLinksDeleteWorkspace(toDeleteWorkspaceId),\r\n        mitigationLinksDeleteWorkspace(toDeleteWorkspaceId),\r\n        flowDeleteWorkspace(toDeleteWorkspaceId),\r\n        controlsDeleteWorkspace(toDeleteWorkspaceId),\r\n        controlLinksDeleteWorkspace(toDeleteWorkspaceId),\r\n      ]);\r\n\r\n      switchWorkspace(null);\r\n    }\r\n  }, [\r\n    switchWorkspace,\r\n    applicationInfoDeleteWorkspace,\r\n    architectureInfoDeleteWorkspace,\r\n    dataflowInfoDeleteWorkspace,\r\n    threatsDeleteWorkspace,\r\n    assumptionsDeleteWorkspace,\r\n    mitigationsDeleteWorkspace,\r\n    assumptionLinksDeleteWorkspace,\r\n    mitigationLinksDeleteWorkspace,\r\n    flowDeleteWorkspace,\r\n    controlsDeleteWorkspace,\r\n    controlLinksDeleteWorkspace,\r\n    removeWorkspace,\r\n  ]);\r\n\r\n  return {\r\n    removeData,\r\n    deleteCurrentWorkspace,\r\n  };\r\n};\r\n\r\nexport default useRemoveData;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}